<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libft900: include/ft900_usbd_hbw.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="brtlogo.png"/></td>
  <td id="projectalign">
   <div id="projectname">libft900<span id="projectnumber">&#160;2.6.0</span>
   </div>
   <div id="projectbrief">A hardware abstraction library for the FT9xx</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">ft900_usbd_hbw.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>USB Device High Bandwidth Isochronous IN support API on FT90x Rev C onwards.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a4cd09c4de8af7d6c27dfc2b7236ffc5b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5b">USBD_HBW_HBWMODE</a> { <a class="el" href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5ba1ed42bf749c0c43d16d679b60796dab4">USBD_HBW_TRANSACTION_1</a> = 1
, <a class="el" href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5ba84e2b79e9843f373a900a334fd4c46dd">USBD_HBW_TRANSACTION_2</a> = 2
, <a class="el" href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5ba1b3ef53c598c2efd517b486b5ad20fdc">USBD_HBW_TRANSACTION_3</a> = 3
 }</td></tr>
<tr class="memdesc:a4cd09c4de8af7d6c27dfc2b7236ffc5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enums used to configure whether the endpoint handles one or two or three 1024-byte packets per microframe.  <a href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5b">More...</a><br /></td></tr>
<tr class="separator:a4cd09c4de8af7d6c27dfc2b7236ffc5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a41c2b90ba91301df20e0dd556787aec7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ft900__usbd__hbw_8h.html#a41c2b90ba91301df20e0dd556787aec7">USBD_HBW_init_endpoint</a> (<a class="el" href="ft900__usbd_8h.html#ab0d985b035ef563a7379df0f45216cbc">USBD_ENDPOINT_NUMBER</a> ep_number, uint16_t fifo_size, <a class="el" href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5b">USBD_HBW_HBWMODE</a> mode)</td></tr>
<tr class="memdesc:a41c2b90ba91301df20e0dd556787aec7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable Automatic header mode.  <a href="ft900__usbd__hbw_8h.html#a41c2b90ba91301df20e0dd556787aec7">More...</a><br /></td></tr>
<tr class="separator:a41c2b90ba91301df20e0dd556787aec7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac48c1019f0782cf4244d5951bb7c46b"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ft900__usbd__hbw_8h.html#aac48c1019f0782cf4244d5951bb7c46b">USBD_HBW_iso_transfer</a> (<a class="el" href="ft900__usbd_8h.html#ab0d985b035ef563a7379df0f45216cbc">USBD_ENDPOINT_NUMBER</a> ep_number, uint8_t *buffer, size_t length, uint8_t part, size_t offset)</td></tr>
<tr class="memdesc:aac48c1019f0782cf4244d5951bb7c46b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Transfer data from a HBW USB endpoint with options.  <a href="ft900__usbd__hbw_8h.html#aac48c1019f0782cf4244d5951bb7c46b">More...</a><br /></td></tr>
<tr class="separator:aac48c1019f0782cf4244d5951bb7c46b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaa7b193c0153aedb7f1f39060848730"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ft900__usbd__hbw_8h.html#abaa7b193c0153aedb7f1f39060848730">USBD_HBW_is_fifo_full</a> (void)</td></tr>
<tr class="memdesc:abaa7b193c0153aedb7f1f39060848730"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from HW register and indicates HBW FIFO status.  <a href="ft900__usbd__hbw_8h.html#abaa7b193c0153aedb7f1f39060848730">More...</a><br /></td></tr>
<tr class="separator:abaa7b193c0153aedb7f1f39060848730"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a628059d98f5def8ae32e3ff33ef02a39"><td class="memItemLeft" align="right" valign="top">int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ft900__usbd__hbw_8h.html#a628059d98f5def8ae32e3ff33ef02a39">USBD_HBW_is_space_avail</a> (void)</td></tr>
<tr class="memdesc:a628059d98f5def8ae32e3ff33ef02a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads from HW register and indicates if atleast 1 burst space (1024) available.  <a href="ft900__usbd__hbw_8h.html#a628059d98f5def8ae32e3ff33ef02a39">More...</a><br /></td></tr>
<tr class="separator:a628059d98f5def8ae32e3ff33ef02a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >USB Device High Bandwidth Isochronous IN support API on FT90x Rev C onwards. </p>
<p >This contains USB Device High Bandwidth Isochronous IN support API function definitions, constants and structures which are exposed in the API.</p>
<p >Note that as this is a USB device all transaction nomenclature is from the point of view from the host. If the device sends data to the host then it is called an IN transaction, if it receives data from the host then it is an OUT transaction. </p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a4cd09c4de8af7d6c27dfc2b7236ffc5b" name="a4cd09c4de8af7d6c27dfc2b7236ffc5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cd09c4de8af7d6c27dfc2b7236ffc5b">&#9670;&nbsp;</a></span>USBD_HBW_HBWMODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5b">USBD_HBW_HBWMODE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enums used to configure whether the endpoint handles one or two or three 1024-byte packets per microframe. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a4cd09c4de8af7d6c27dfc2b7236ffc5ba1ed42bf749c0c43d16d679b60796dab4" name="a4cd09c4de8af7d6c27dfc2b7236ffc5ba1ed42bf749c0c43d16d679b60796dab4"></a>USBD_HBW_TRANSACTION_1&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4cd09c4de8af7d6c27dfc2b7236ffc5ba84e2b79e9843f373a900a334fd4c46dd" name="a4cd09c4de8af7d6c27dfc2b7236ffc5ba84e2b79e9843f373a900a334fd4c46dd"></a>USBD_HBW_TRANSACTION_2&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a4cd09c4de8af7d6c27dfc2b7236ffc5ba1b3ef53c598c2efd517b486b5ad20fdc" name="a4cd09c4de8af7d6c27dfc2b7236ffc5ba1b3ef53c598c2efd517b486b5ad20fdc"></a>USBD_HBW_TRANSACTION_3&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a41c2b90ba91301df20e0dd556787aec7" name="a41c2b90ba91301df20e0dd556787aec7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41c2b90ba91301df20e0dd556787aec7">&#9670;&nbsp;</a></span>USBD_HBW_init_endpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void USBD_HBW_init_endpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ft900__usbd_8h.html#ab0d985b035ef563a7379df0f45216cbc">USBD_ENDPOINT_NUMBER</a>&#160;</td>
          <td class="paramname"><em>ep_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>fifo_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ft900__usbd__hbw_8h.html#a4cd09c4de8af7d6c27dfc2b7236ffc5b">USBD_HBW_HBWMODE</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable Automatic header mode. </p>
<p >Automatically inserts the UVC header (<a class="el" href="struct_u_s_b___u_v_c___payload___header___p_t_s.html">USB_UVC_Payload_Header_PTS</a>) and transfers the existing FIFO data to USB bus.</p>
<p >Initializes HBW pipe and hooks up to a logical endpoint.</p>
<p >Initializes HBW pipe and hooks up to a logical endpoint.<br  />
 This function need to be called after creation of IN endpoint using <a class="el" href="ft900__usbd_8h.html#a893a0acd5779eeab9807be19ba481ed3" title="Create a USB endpoint.">USBD_create_endpoint()</a> There is a total of 6 kB of RAM for all the endpoints EP1-7 (excluding the RAM allocated to endpoint 0). Out of 6kB, upto a maximum of 4kB of fifo size can be configured for HBW isochronous IN pipe. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_number</td><td>USB IN endpoint number. (N/A for control and OUT endpoints). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">fifo_size</td><td>Define the FIFO size for HBW ISO IN pipe allocated in SRAM. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[mode]</td><td>Number of ISO IN transactions in a USB microframe (USBD_HBW_HBWMODE). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abaa7b193c0153aedb7f1f39060848730" name="abaa7b193c0153aedb7f1f39060848730"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaa7b193c0153aedb7f1f39060848730">&#9670;&nbsp;</a></span>USBD_HBW_is_fifo_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t USBD_HBW_is_fifo_full </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from HW register and indicates HBW FIFO status. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if status of HBW FIFO is full. Returns 0 if not full </dd></dl>

</div>
</div>
<a id="a628059d98f5def8ae32e3ff33ef02a39" name="a628059d98f5def8ae32e3ff33ef02a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a628059d98f5def8ae32e3ff33ef02a39">&#9670;&nbsp;</a></span>USBD_HBW_is_space_avail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int8_t USBD_HBW_is_space_avail </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads from HW register and indicates if atleast 1 burst space (1024) available. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns 1 if at least 1 burst space for data available. Returns 0 if not enough space </dd></dl>

</div>
</div>
<a id="aac48c1019f0782cf4244d5951bb7c46b" name="aac48c1019f0782cf4244d5951bb7c46b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac48c1019f0782cf4244d5951bb7c46b">&#9670;&nbsp;</a></span>USBD_HBW_iso_transfer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t USBD_HBW_iso_transfer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ft900__usbd_8h.html#ab0d985b035ef563a7379df0f45216cbc">USBD_ENDPOINT_NUMBER</a>&#160;</td>
          <td class="paramname"><em>ep_number</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>part</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Transfer data from a HBW USB endpoint with options. </p>
<p >The data to be sent on the IN endpoint is copied to the FIFO in SRAM whenever atleast there 1 packet of data space is available. The offset is useful in case UVC header information is passed from the application (within the current packet) and the data following the header to be copied at an offset of header bytes. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ep_number</td><td>USB IN endpoint number. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>Appropriately sized buffer for the transfer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">length</td><td>the number of bytes to be sent. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">part</td><td>UNUSED </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>Offset (within the current packet) from where to continue for subsequent calls when using partial packets. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of bytes actually transferred. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 7 2022 14:07:40 for libft900 by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
